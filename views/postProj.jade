extends layout
block content
  //- script(hsrc='/js/markdown/markdown-it.js')
  //- script(hsrc='/js/markdown/markdown-it-footnote.js')
  //- script(hsrc='/js/markdown/highlight.pack.js')
  //- script(hsrc='/js/markdown/emojify.js')
  //- script(hsrc='/js/markdown/codemirror/lib/codemirror.js')
  //- script(hsrc='/js/markdown/codemirror/overlay.js')
  //- script(hsrc='/js/markdown/codemirror/xml/xml.js')
  //- script(hsrc='/js/markdown/codemirror/markdown/markdown.js')
  //- script(hsrc='/js/markdown/codemirror/gfm/gfm.js')
  //- script(hsrc='/js/markdown/codemirror/javascript/javascript.js')
  //- script(hsrc='/js/markdown/codemirror/css/css.js')
  //- script(hsrc='/js/markdown/codemirror/htmlmixed/htmlmixed.js')
  //- script(hsrc='/js/markdown/codemirror/lib/util/continuelist.js')
  //- script(hsrc='/js/markdown/rawinflate.js')
  //- script(hsrc='/js/markdown/rawdeflate.js')
  //- link(rel='stylesheet', href='/css/base16-light.css')
  //- link(rel='stylesheet', href='/js/markdown/codemirror/lib/codemirror.css')
  //- link(rel='stylesheet', href='/css/default.css')
  //- link(rel='stylesheet', href='/css/markdown-it.css')
  //- #introHead
  .container.containerIntro
    .page-header
      h3 專案管理
    ul.list-group
      .row
        .col-sm-offset-3.col-sm-6
          each val, index in allProjects
            form.form-horizontal(action='deleteProj/#{val.id}', method='POST')
              li.list-group-item #{index} | #{val.title} | #{val.goalmoney}
                span.alignRight
                  button.btn.btn-default(type='submit')
                    i.fa.fa-minus-circle
                    | Delete
              
    .page-header
      h3 發案
    p
    form.form-horizontal(action='/postProj', method='POST')
      input(type='hidden', name='_csrf', value=_csrf)
      .form-group
        label.col-sm-4.control-label(for='title') 標題
        .col-sm-5
          input.form-control(type='text', name='title', id='title',placeholder='Ex.【Loffo x 江峰】舞蹈、創作、重生')
      .form-group
        label.col-sm-4.control-label(for='name') 案主
        .col-sm-5
          input.form-control(type='text', name='name', id='name',placeholder='Ex. 江峰')
      .form-group
        label.col-sm-4.control-label(for='content') 簡述
        .col-sm-5
          textarea.form-control(type='text', name='content', id='content', rows='6', placeholder='Ex. 在生涯規劃上，決心走向藝術這條道路。對我而言，舞蹈是一種自我認識，找出自己與世界不同的方式，希望能接觸更多舞蹈訓練，能更加展現自我，並希望可以讓更多人去接觸、喜愛表演藝術。')
      .form-group
        label.col-sm-4.control-label(for='video') 影片連結 (Only Youtube)
        .col-sm-5
          input.form-control(type='text', name='video', id='video', placeholder='Ex. https://www.youtube.com/watch?v=dgXDBRpejN8')
      .form-group
        label.col-sm-4.control-label(for='money') 募資金額 (only 數字)
        .col-sm-5
          input.form-control(type='text', name='money', id='money', placeholder='Ex. 2000')
      .form-group
        .col-sm-offset-4.col-sm-5
          button.col-sm-12.btn.btn-primary(type='submit')
            i.fa.fa-pencil
            | 發案
      //- .form-group
      //-   #in
      //-     form
      //-       textarea#code
      //-         | # (GitHub-Flavored) Markdown Editor
      //-         | Basic useful feature list:
      //-         | * Ctrl+S / Cmd+S to save the file
      //-         | * Ctrl+Shift+S / Cmd+Shift+S to choose to save as Markdown or HTML
      //-         | * Drag and drop a file into here to load it
      //-         | * File contents are saved in the URL so you can share files
      //-         | I'm no good at writing sample / filler text, so go write something yourself.
      //-         | Look, a list!
      //-         | * foo
      //-         | * bar
      //-         | * baz
      //-         | And here's some code! :+1:
      //-         | ```javascript
      //-         | $(function(){
      //-         | $('div').html('I am a div.');
      //-         | });
      //-         | ```
      //-         | This is [on GitHub](https://github.com/jbt/markdown-editor) so let me know if I've b0rked it somewhere.
      //-         | Props to Mr. Doob and his [code editor](http://mrdoob.com/projects/code-editor/), from which
      //-         | the inspiration to this, and some handy implementation hints, came.
      //-         | ### Stuff used to make this:
      //-         | * [markdown-it](https://github.com/markdown-it/markdown-it) for Markdown parsing
      //-         | * [CodeMirror](http://codemirror.net/) for the awesome syntax-highlighted editor
      //-         | * [highlight.js](http://softwaremaniacs.org/soft/highlight/en/) for syntax highlighting in output code blocks
      //-         | * [js-deflate](https://github.com/dankogai/js-deflate) for gzipping of data to make it fit in URLs
      //-   #out
      //-   #menu
      //-     span Save As
      //-     #saveas-markdown
      //-       svg(height='64', width='64', xmlns='http://www.w3.org/2000/svg')
      //-         g(transform='scale(0.0625)')
      //-           path(d='M950.154 192H73.846C33.127 192 0 225.12699999999995 0 265.846v492.308C0 798.875 33.127 832 73.846 832h876.308c40.721 0 73.846-33.125 73.846-73.846V265.846C1024 225.12699999999995 990.875 192 950.154 192zM576 703.875L448 704V512l-96 123.077L256 512v192H128V320h128l96 128 96-128 128-0.125V703.875zM767.091 735.875L608 512h96V320h128v192h96L767.091 735.875z')
      //-       span Markdown
      //-     #saveas-html
      //-       svg(height='64', width='64', xmlns='http://www.w3.org/2000/svg')
      //-         g(transform='scale(0.0625) translate(64,0)')
      //-           path(d='M608 192l-96 96 224 224L512 736l96 96 288-320L608 192zM288 192L0 512l288 320 96-96L160 512l224-224L288 192z')
      //-       span HTML
      //-     a#close-menu ×
      

      //- .form-group
      //-   label.col-sm-4.control-label(for='bannerPImg') Banner橫幅
      //-   .col-sm-5
      //-     input#input-10(type='file', data-preview-file-type='text', accept='image/*', class='file-loading', name='bannerPImg')
      //- .form-group
      //-   label.col-sm-4.control-label(for='motivPImg') 動機圖
      //-   .col-sm-5
      //-     input#input-10(type='file', data-preview-file-type='text', accept='image/*', class='file-loading', name='motivPImg')
      //- .form-group
      //-   label.col-sm-4.control-label(for='profilePImg') 簡歷圖
      //-   .col-sm-5
      //-     input#input-10(type='file', data-preview-file-type='text', accept='image/*', class='file-loading', name='profilePImg')
      //- .form-group
      //-   label.col-sm-4.control-label(for='feedbackPImg') 回饋品圖
      //-   .col-sm-5
      //-     input#input-10(type='file', data-preview-file-type='text', accept='image/*', class='file-loading', name='feedbackPImg')                  
//- script(type='text/javascript').
//-   var URL = window.URL || window.webkitURL || window.mozURL || window.msURL;
//-   navigator.saveBlob = navigator.saveBlob || navigator.msSaveBlob || navigator.mozSaveBlob || navigator.webkitSaveBlob;
//-   window.saveAs = window.saveAs || window.webkitSaveAs || window.mozSaveAs || window.msSaveAs;
//-   // Because highlight.js is a bit awkward at times
//-   var languageOverrides = {
//-   js: 'javascript',
//-   html: 'xml'
//-   };
//-   emojify.setConfig({ img_dir: 'emoji' });
//-   var md = markdownit({
//-   html: true,
//-   highlight: function(code, lang){
//-   if(languageOverrides[lang]) lang = languageOverrides[lang];
//-   if(lang && hljs.getLanguage(lang)){
//-   try {
//-   return hljs.highlight(lang, code).value;
//-   }catch(e){}
//-   }
//-   return '';
//-   }
//-   })
//-   .use(markdownitFootnote);
//-   var hashto;
//-   function update(e){
//-   setOutput(e.getValue());
//-   clearTimeout(hashto);
//-   hashto = setTimeout(updateHash, 1000);
//-   }
//-   function setOutput(val){
//-   val = val.replace(/<equation>((.*?\\n)*?.*?)<\/equation>/ig, function(a, b){
//-   return '<img src="http://latex.codecogs.com/png.latex?' + encodeURIComponent(b) + '" />';
//-   });
//-   var out = document.getElementById('out');
//-   var old = out.cloneNode(true);
//-   out.innerHTML = md.render(val);
//-   emojify.run(out);
//-   var allold = old.getElementsByTagName("*");
//-   if (allold === undefined) return;
//-   var allnew = out.getElementsByTagName("*");
//-   if (allnew === undefined) return;
//-   for (var i = 0, max = Math.min(allold.length, allnew.length); i < max; i++) {
//-   if (!allold[i].isEqualNode(allnew[i])) {
//-   out.scrollTop = allnew[i].offsetTop;
//-   return;
//-   }
//-   }
//-   }
//-   var editor = CodeMirror.fromTextArea(document.getElementById('code'), {
//-   mode: 'gfm',
//-   lineNumbers: false,
//-   matchBrackets: true,
//-   lineWrapping: true,
//-   theme: 'base16-light',
//-   extraKeys: {"Enter": "newlineAndIndentContinueMarkdownList"}
//-   });
//-   editor.on('change', update);
//-   document.addEventListener('drop', function(e){
//-   e.preventDefault();
//-   e.stopPropagation();
//-   var reader = new FileReader();
//-   reader.onload = function(e){
//-   editor.setValue(e.target.result);
//-   };
//-   reader.readAsText(e.dataTransfer.files[0]);
//-   }, false);
//-   function saveAsMarkdown(){
//-   save(editor.getValue(), "untitled.md");
//-   }
//-   function saveAsHtml() {
//-   save(document.getElementById('out').innerHTML, "untitled.html");
//-   }
//-   document.getElementById('saveas-markdown').addEventListener('click', function() {
//-   saveAsMarkdown();
//-   hideMenu();
//-   });
//-   document.getElementById('saveas-html').addEventListener('click', function() {
//-   saveAsHtml();
//-   hideMenu();
//-   });
//-   function save(code, name){
//-   var blob = new Blob([code], { type: 'text/plain' });
//-   if(window.saveAs){
//-   window.saveAs(blob, name);
//-   }else if(navigator.saveBlob){
//-   navigator.saveBlob(blob, name);
//-   }else{
//-   url = URL.createObjectURL(blob);
//-   var link = document.createElement("a");
//-   link.setAttribute("href",url);
//-   link.setAttribute("download",name);
//-   var event = document.createEvent('MouseEvents');
//-   event.initMouseEvent('click', true, true, window, 1, 0, 0, 0, 0, false, false, false, false, 0, null);
//-   link.dispatchEvent(event);
//-   }
//-   }
//-   var menuVisible = false;
//-   var menu = document.getElementById('menu');
//-   function showMenu() {
//-   menuVisible = true;
//-   menu.style.display = 'block';
//-   }
//-   function hideMenu() {
//-   menuVisible = false;
//-   menu.style.display = 'none';
//-   }
//-   document.getElementById('close-menu').addEventListener('click', function(){
//-   hideMenu();
//-   });
//-   document.addEventListener('keydown', function(e){
//-   if(e.keyCode == 83 && (e.ctrlKey || e.metaKey)){
//-   e.shiftKey ? showMenu() : saveAsMarkdown();
//-   e.preventDefault();
//-   return false;
//-   }
//-   if(e.keyCode === 27 && menuVisible){
//-   hideMenu();
//-   e.preventDefault();
//-   return false;
//-   }
//-   });
//-   function updateHash(){
//-   window.location.hash = btoa( // base64 so url-safe
//-   RawDeflate.deflate( // gzip
//-   unescape(encodeURIComponent( // convert to utf8
//-   editor.getValue()
//-   ))
//-   )
//-   );
//-   }
//-   if(window.location.hash){
//-   var h = window.location.hash.replace(/^#/, '');
//-   if(h.slice(0,5) == 'view:'){
//-   setOutput(decodeURIComponent(escape(RawDeflate.inflate(atob(h.slice(5))))));
//-   document.body.className = 'view';
//-   }else{
//-   editor.setValue(
//-   decodeURIComponent(escape(
//-   RawDeflate.inflate(
//-   atob(
//-   h
//-   )
//-   )
//-   ))
//-   );
//-   update(editor);
//-   editor.focus();
//-   }
//-   }else{
//-   update(editor);
//-   editor.focus();
//-   }